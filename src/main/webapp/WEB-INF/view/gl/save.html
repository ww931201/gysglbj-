#include("/WEB-INF/view/common/qui/header.html")

<!-- 树组件start -->
<script type="text/javascript" src="/libs/js/tree/ztree/ztree.js"></script>
<link type="text/css" rel="stylesheet" href="/libs/js/tree/ztree/ztree.css"></link>
<!-- 树组件end -->

<!-- 树形下拉框start -->
<script type="text/javascript" src="/libs/js/form/selectTree.js"></script>
<!-- 树形下拉框end -->

<!-- 表单验证start -->
<script src="/libs/js/form/validationRule.js" type="text/javascript"></script>
<script src="/libs/js/form/validation.js" type="text/javascript"></script>
<!-- 表单验证end -->

<!-- 日期选择框start -->
<script type="text/javascript" src="/libs/js/form/datePicker/WdatePicker.js"></script>
<!-- 日期选择框end -->

<script type="text/javascript" src="/libs/js/myjs/jquery.form.js"></script>

</head>
<body>
<div class="box1" overflow="true" panelHeight="450" id="formContent" whiteBg="true">
	<form id="myFormId" onsubmit="return false;" method="post">
	<table class="tableStyle" formMode="transparent">
	
	<input type="hidden" name="supplier.ID" value="#(supplier.ID ??)" />
				<tr>
					<td width="200">供应商编号：</td>
					<td><input type='text' name='supplier.GYSBH'
						value='#(supplier.GYSBH ??)'
						class='validate[required,length[0,30]]'/><span class='star'>*</span></td>
				</tr>
				<tr>
					<td>社会信用代码：</td>
					<td><input type='text' name='supplier.SHXYDM'
						value='#(supplier.SHXYDM ??)'
						class='validate[required,length[0,30]]'/><span class='star'>*</span></td>
				</tr>
				<tr>
					<td>营业执照注册号：</td>
					<td><input type='text' name='supplier.YYZZZCH'
						value='#(supplier.YYZZZCH ??)'
						class='validate[required,length[0,30]]'/><span class='star'>*</span></td>
				</tr>
				<tr>
					<td>企业名称：</td>
					<td><input type='text' name='supplier.QYMC'
						value='#(supplier.QYMC ??)'
						class='validate[required,length[0,30]]'/><span class='star'>*</span></td>
				</tr>
				<tr>
					<td>法定代表人：</td>
					<td><input type='text' name='supplier.FDDBR'
						value='#(supplier.FDDBR ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>法定代表人电话：</td>
					<td><input type='text' name='supplier.FDDBRDH'
						value='#(supplier.FDDBRDH ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>所属省：</td>
					<td><input type='text' name='supplier.SSS'
						value='#(supplier.SSS ??)' class='' /></td>
				</tr>
				<tr>
					<td>所属市：</td>
					<td><input type='text' name='supplier.SSS1'
						value='#(supplier.SSS1 ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>住所：</td>
					<td><input type='text' name='supplier.ZS'
						value='#(supplier.ZS ??)' class='' /></td>
				</tr>
				<tr>
					<td>注册资本：</td>
					<td><input type='text' name='supplier.ZCZB'
						value='#(supplier.ZCZB ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>成立日期：</td>
					<td>
					<input type='text' name='supplier.CLRQ'
						value='#(supplier.CLRQ ??)'
						class='date validate[custom[date]]' style="width:120px;" dateFmt="yyyy-MM-dd" /></td>
				</tr>
				<tr>
					<td>营业期限：</td>
					<td><input type='text' name='supplier.YYQX'
						value='#(supplier.YYQX ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>企业类型：</td>
					<td><input type='text' name='supplier.QYLX'
						value='#(supplier.QYLX ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>组织机构代码：</td>
					<td><input type='text' name='supplier.ZZJGDM'
						value='#(supplier.ZZJGDM ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>税务登记号：</td>
					<td><input type='text' name='supplier.SWDJH'
						value='#(supplier.SWDJH ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>有效期：</td>
					<td><input type='text' name='supplier.YXQ'
						value='#(supplier.YXQ ??)' class='date validate[custom[date]]' style="width:120px;" dateFmt="yyyy-MM-dd" /></td>
				</tr>
				<tr>
					<td>业务联系人：</td>
					<td><input type='text' name='supplier.YWLXR'
						value='#(supplier.YWLXR ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>联系人手机：</td>
					<td><input type='text' name='supplier.LXRSJ'
						value='#(supplier.LXRSJ ??)'
						class='validate[custom[mobilephone]]'/></td>
				</tr>
				<tr>
					<td>办公传真：</td>
					<td><input type='text' name='supplier.BGCZ'
						value='#(supplier.BGCZ ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>办公电话：</td>
					<td><input type='text' name='supplier.BGDH'
						value='#(supplier.BGDH ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>联系人邮箱：</td>
					<td><input type='text' name='supplier.LXRYX'
						value='#(supplier.LXRYX ??)'
						class='validate[email]'/></td>
				</tr>
				<tr>
					<td>联系人职务：</td>
					<td><input type='text' name='supplier.LXRZW'
						value='#(supplier.LXRZW ??)'
						class=''/></td>
				</tr>
				<tr>
					<td>办公地址：</td>
					<td><input type='text' name='supplier.BGDZ'
						value='#(supplier.BGDZ ??)'
						class=''/></td>
				</tr>
				<!-- <tr>
					<td>资质证书：</td>
					<td><input type='text' name='supplier.ZZZS'
						value='#(supplier.ZZZS ??)'
						class='validate[required,length[0,30]]'/><span class='star'>*</span></td>
				</tr> -->
				<tr>
					<td>不良供应商处罚周期：</td>
					<td><input type='text' name='supplier.BLGYSCFZQ'
						value='#(supplier.BLGYSCFZQ ??)'
						class='date validate[custom[date]]'/></td>
				</tr>
				<tr>
					<td>黑名单：</td>
					<td>
					<select name="supplier.HMD" data='{"list":[{"key":"是","value":"是"},{"key":"否","value":"否"}]}' selectedValue="#(supplier.HMD ?? '否')">
					</select>
					<!-- <select name="supplier.HMD" id="searchInput" style="text-align: center">
					<option value="是">是</option>
					<option value="否" selected="selected">否</option>
					</select> -->
					</td> 
					<!-- <td>
					<input type='text' name='supplier.HMD'
						value='#(supplier.HMD ??)' 
						class=''/></td> -->
				</tr>
				<tr>
				
					<td>供应商信用等级评价：</td>
					<td>
						<select url="/suppliergrade/listsup" prompt="请选择" name="supplier.BLGYSXYPJDJ" selectedValue="#(supplier.BLGYSXYPJDJ ?? )"></select>
					</td>
				</tr>
				<!-- <tr>
					<td>供应商经营范围：</td>
					<td><input type='text' name='supplier.GYSJYFW'
						value='#(supplier.GYSJYFW ??)'
						class=''/></td>
				</tr> -->
				<!-- <tr>
					<td>录入时间：</td>
					<td><input type='text' name='supplier.ENTRY_TIME'
						value='#(supplier.ENTRY_TIME ??)'
						class='validate[required,length[0,30]]' /><span class='star'>*</span></td>
				</tr> -->
				<!-- <tr>
					<td>资质证书ID：</td>
					<td><input type='text' name='supplier.CERTIFICATE_ID'
						value='#(supplier.CERTIFICATE_ID ??)'
						class='validate[required,length[0,30]]' /><span class='star'>*</span></td>
				</tr> -->
				<!-- 新功能 -->
				<tr>
					<td>供应商分类：</td>
					<td>
					<select url="/suppliersort/GysflList"
							prompt="请选择" name="supplier.GYSFL" selectedValue="#(supplier.GYSFL ?? )"></select>
					</td>
				</tr>
				
				<tr>
					<td>供应商企业性质：</td>
					<td>
					<select name="supplier.GYSQYXZ" data='{"list":[{"key":"厂商","value":"厂商"},{"key":"代理商","value":"代理商"},{"key":"其他","value":"其他"}]}' selectedValue="#(supplier.GYSQYXZ ?? '其他')">
					</td>
				</tr>
				
				<tr>
					<td>营业执照照片：</td>
			<!-- 		<td><input type='text' name='supplier.YYZZZP'
						value='#(supplier.YYZZZP ??)'
						class=''/></td> -->
				</tr>
				<tr>
				<td>
					<img id="uploadpicId"  src="#(supplier.YYZZZP ??)" alt="" style="width: 100px;"/>
				</td> 
				<td> 
					<input  type='file' name='images' multiple="multiple" onchange="uploadPic()" />
					<input id="yyzzzp" type="hidden" name="supplier.YYZZZP" value="#(supplier.YYZZZP ??)">
					<!-- <input id="yyzzzp2" type="hidden" name="supplier.YYZZZP" value="#(supplier.YYZZZP ??)">
					<input id="yyzzzp3" type="hidden" name="supplier.YYZZZP" value="#(supplier.YYZZZP ??)"> -->
				</td>
				</tr>
				<tr>
					<td colspan="2">
						<button onclick="submitHandler()">提交</button>
						<input type="button" value="取消" onclick='top.Dialog.close()'/>
					</td>
				</tr>
	</table>
	</form>
</div>
<!-- 异步提交start -->
<script type="text/javascript">
function submitHandler() {
	var valid = $('#myFormId').validationEngine({returnIsValid: true});
	if(valid){
		$.post("/gys/save", $('#myFormId').serializeArray(), function(data) {
			top.Dialog.alert(data.message, function(){
            	if(!data.content){		            		
	            	closeWin();
            	} else {
            		top.Dialog.alert(data.content);
            	}
            })
		});
	 }else{
		 top.Dialog.alert('表单填写不正确，请按要求修改红色框内容!');
		} 
	
}

function initComplete(){
    //初始化
	//selectUnit(document.getElementById("id_unit_input"));
}

//重置
function closeWin(){
	var update = false;
	var isupdate = '#(supplier ??)';
	if(isupdate != ''){
		update = true;
	}else{
		update = false;
	}
	//刷新数据
	top.frmright.refresh(update);
	//关闭窗口
	top.Dialog.close();
}

		
function uploadPic(){
var picoption = { 
	 type: "post",  //提交方式  
	 dataType: "json", //数据类型  
	 url:"/gys/uploadPic",//默认是form action
	success:function(data){
		if(data.error == 0 ){
			console.log(data)
			$("#uploadpicId").attr("src",data.src);
			$("#yyzzzp").val(data.src);
			$("#yyzzzp2").val(data.src);
			$("#yyzzzp3").val(data.src);
			
			}else{
				top.Dialog.alert(data.message);
			}
		},
    error : function(data, status) {
    			top.Dialog.alert(data.message);
        }
	};
	$("#myFormId").ajaxSubmit(picoption);
}
/**
function selectUnit(e) {
	var id = $(e).attr("relvalue") || $(e).attr("selectedvalue");
	var url = "/supplier/officeList?unitId="+id;

	$.post(url, function(data){
		 if(data.treeNodes.length != 0) {
		 	$("#id_office_input").data("data", data); 	
		 } else {
			 $("#id_office_input").data("data", null);
		 }
		 $("#id_office_input").render();
		 
	});
	
	
	//console.log(url+"?unitId="+$(e).attr("relvalue"))
}**/
</script>
<!-- 异步提交end -->	
</body>	
</html>